$((function(){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i),i}:t(jQuery)}((function(t){function e(e,i,o){var s,r;"string"==typeof o&&(o={className:o}),this.options=(s=g,r=t.isPlainObject(o)?o:{},(o=function(){}).prototype=s,t.extend(!0,new o,r)),this.loadHTML(),this.wrapper=t(d.html),this.options.clickToHide&&this.wrapper.addClass(a+"-hidable"),this.wrapper.data(a,this),this.arrow=this.wrapper.find("."+a+"-arrow"),this.container=this.wrapper.find("."+a+"-container"),this.container.append(this.userContainer),e&&e.length&&(this.elementType=e.attr("type"),this.originalElement=e,this.elem=n(e),this.elem.data(a,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(i)}function i(e,i){if(!e)throw"Missing Style name";if(!i)throw"Missing Style definition";if(!i.html)throw"Missing Style HTML";var n=f[e];n&&n.cssElem&&(window.console&&console.warn("notify: overwriting style '"+e+"'"),f[e].cssElem.remove()),i.name=e,f[e]=i;var o="";i.classes&&t.each(i.classes,(function(e,n){return o+="."+a+"-"+i.name+"-"+e+" {\n",t.each(n,(function(e,i){return m[e]&&t.each(m[e],(function(t,n){return o+="\t"+n+e+": "+i+";\n"})),o+="\t"+e+": "+i+";\n"})),o+="}\n"})),i.css&&(o+="/* styles for "+i.name+" */\n"+i.css),o&&(i.cssElem=y(o),i.cssElem.attr("id","notify-"+i.name)),n={},e=t(i.html),w("html",e,n),w("text",e,n),i.fields=n}function n(e){return e.is("[type=radio]")&&(e=e.parents("form:first").find("[type=radio]").filter((function(i,n){return t(n).attr("name")===e.attr("name")})).first()),e}function o(t,e,i){var n;if("string"==typeof i)i=parseInt(i,10);else if("number"!=typeof i)return;return!isNaN(i)&&(void 0!==t[n=l[u[e.charAt(0)]]]&&(e=l[n.charAt(0)],i=-i),void 0===t[e]?t[e]=i:t[e]+=i,0)}function s(t,e,i){if("l"===t||"t"===t)return 0;if("c"===t||"m"===t)return i/2-e/2;if("r"===t||"b"===t)return i-e;throw"Invalid alignment"}var r=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},a="notifyjs",l={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},h=["l","c","r"],c=["t","m","b"],p=["t","b","l","r"],u={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},f={},d={name:"core",html:'<div class="'+a+'-wrapper">\n\t<div class="'+a+'-arrow"></div>\n\t<div class="'+a+'-container"></div>\n</div>',css:"."+a+"-corner {}\n\n."+a+"-corner ."+a+"-wrapper,\n."+a+"-corner ."+a+"-container {}\n\n."+a+"-wrapper {}\n\n."+a+"-container {}\n\n."+a+"-hidable {}\n\n[data-notify-text],[data-notify-html] {}\n\n."+a+"-arrow {}"},m={"border-radius":["-webkit-","-moz-"]},y=function(e){var i;(i=v("style")).attr("type","text/css"),t("head").append(i);try{i.html(e)}catch(t){i[0].styleSheet.cssText=e}return i},w=function(e,i,n){var o;return"html"!==e&&(e="text"),b(i,"["+(o="data-notify-"+e)+"]").each((function(){var i;(i=t(this).attr(o))||(i="notify!blank"),n[i]=e}))},b=function(t,e){return t.is(e)?t:t.find(e)},g={clickToHide:!0,autoHide:!0,autoHideDelay:3e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom center",globalPosition:"bottom center",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:0,hideAnimation:"slideUp",hideDuration:0,gap:5},v=function(e){return t("<"+e+"></"+e+">")},x={},S=function(t){return S.e=S.e||v("div"),S.e.text(t).html()};e.prototype.loadHTML=function(){var e=this.getStyle();this.userContainer=t(e.html),this.userFields=e.fields},e.prototype.show=function(t,e){var i,n,o=function(){if(t||n.elem||n.destroy(),e)return e()},s=0<(n=this).container.parent().parents(":hidden").length,r=this.container.add(this.arrow),a=[];if(s&&t)i="show";else if(s&&!t)i="hide";else if(!s&&t)i=this.options.showAnimation,a.push(this.options.showDuration);else{if(s||t)return o();i=this.options.hideAnimation,a.push(this.options.hideDuration)}return a.push(o),r[i].apply(r,a)},e.prototype.setGlobalPosition=function(){var e=this.getPosition(),i=e[0],n=e[1],o=l[i],e=l[n],i=i+"|"+n,n=x[i];return n||(n=x[i]=v("div"),(i={})[o]=0,"middle"===e?i.top="45%":"center"===e?i.left="45%":i[e]=0,n.css(i).addClass(a+"-corner"),t("body").append(n)),n.prepend(this.wrapper)},e.prototype.setElementPosition=function(){var e,i,n,a,f,d,m,y,w,b,g,v,x,S,P,C,N,j,k,H,T,A,M,D,E=(A=this.getPosition())[0],q=A[1];for(A[2],g=this.elem.position(),y=this.elem.outerHeight(),v=this.elem.outerWidth(),w=this.elem.innerHeight(),b=this.elem.innerWidth(),D=this.wrapper.position(),f=this.container.height(),d=this.container.width(),N=l[E],(m={})[A=l[k=u[E]]]="b"===E?y:"r"===E?v:0,o(m,"top",g.top-D.top),o(m,"left",g.left-D.left),x=0,P=(M=["top","left"]).length;x<P;x++)H=M[x],(j=parseInt(this.elem.css("margin-"+H),10))&&o(m,H,j);if(o(m,A,D=Math.max(0,this.options.gap-(this.options.arrowShow?n:0))),this.options.arrowShow){for(n=this.options.arrowSize,i=t.extend({},m),e=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",S=0,C=p.length;S<C;S++)T=l[H=p[S]],H!==k&&(a=T===N?e:"transparent",i["border-"+T]=n+"px solid "+a);o(m,l[k],n),0<=r.call(p,q)&&o(i,l[q],2*n)}else this.arrow.hide();if(0<=r.call(c,E)?(o(m,"left",s(q,d,v)),i&&o(i,"left",s(q,n,b))):0<=r.call(h,E)&&(o(m,"top",s(q,f,y)),i&&o(i,"top",s(q,n,w))),this.container.is(":visible")&&(m.display="block"),this.container.removeAttr("style").css(m),i)return this.arrow.removeAttr("style").css(i)},e.prototype.getPosition=function(){var e,i,n,o,s=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition);if(0===(n=s,o=[],t.each(n.split(/\W+/),(function(t,e){if(l[e=e.toLowerCase().charAt(0)])return o.push(e)})),(s=o).length)&&(s[0]="b"),n=s[0],0>r.call(p,n))throw"Must be one of ["+p+"]";return(1===s.length||(n=s[0],0<=r.call(c,n)&&(e=s[1],0>r.call(h,e)))||(e=s[0],0<=r.call(h,e)&&(i=s[1],0>r.call(c,i))))&&(s[1]=(i=s[0],0<=r.call(h,i)?"m":"l")),2===s.length&&(s[2]=s[1]),s},e.prototype.getStyle=function(t){var e;if(!(e=f[t=(t=t||this.options.style)||"default"]))throw"Missing style: "+t;return e},e.prototype.updateClasses=function(){var e,i=["base"];return t.isArray(this.options.className)?i=i.concat(this.options.className):this.options.className&&i.push(this.options.className),e=this.getStyle(),i=t.map(i,(function(t){return a+"-"+e.name+"-"+t})).join(" "),this.userContainer.attr("class",i)},e.prototype.run=function(e,i){var n,o,s,r,a;if(t.isPlainObject(i)?t.extend(this.options,i):"string"===t.type(i)&&(this.options.className=i),!this.container||e){if(this.container||e){for(s in o={},t.isPlainObject(e)?o=e:o["notify!blank"]=e,o)n=o[s],(r=this.userFields[s])&&("text"===r&&(n=S(n),this.options.breakNewLines&&(n=n.replace(/\n/g,"<br/>"))),a="notify!blank"===s?"":"="+s,b(this.userContainer,"[data-notify-"+r+a+"]").html(n));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}}else this.show(!1)},e.prototype.destroy=function(){this.wrapper.data(a,null),this.wrapper.remove()},t.notify=function(i,n,o){return i&&i.nodeName||i.jquery?t(i).notify(n,o):(o=n,new e(null,n=i,o)),i},t.fn.notify=function(i,o){return t(this).each((function(){var s=n(t(this)).data(a);s&&s.destroy(),new e(t(this),i,o)})),this},t.extend(t.notify,{defaults:function(e){return t.extend(g,e)},addStyle:i,pluginOptions:g,getStyle:function(t){return f[t]},insertCSS:y}),i("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{},error:{},success:{},info:{},warn:{}}}),t((function(){y(d.css).attr("id","core-notify"),t(document).on("click","."+a+"-hidable",(function(e){t(this).trigger("notify-hide")})),t(document).on("notify-hide","."+a+"-wrapper",(function(e){var i=t(this).data(a);i&&i.show(!1)}))}))}))}));
